var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var _t=S((zn,kt)=>{"use strict";var hi=require("util"),St=require("stream");function te(){St.Readable.call(this)}kt.exports=te;hi.inherits(te,St.Readable);te.prototype._read=function(){};te.prototype.addData=function(e){this.push(e)};te.prototype.end=function(){this.push(null)}});var Ae=S(Y=>{"use strict";Y.createTextFrame=function(e,t){var r,i;return r=Buffer.from(e),i=re(!0,1,t===void 0?!1:t,r),Buffer.concat([i,r],i.length+r.length)};Y.createBinaryFrame=function(e,t,r,i){var n,a;return r=r===void 0?!0:r,t=t===void 0?!1:t,t?(n=Buffer.alloc(e.length),e.copy(n)):n=e,a=re(i===void 0?!0:i,r?2:0,t,n),Buffer.concat([a,n],a.length+n.length)};Y.createCloseFrame=function(e,t,r){var i,n;return e!==void 0&&e!==1005?(i=Buffer.from(t===void 0?"--":"--"+t),i.writeUInt16BE(e,0)):i=Buffer.alloc(0),n=re(!0,8,r===void 0?!1:r,i),Buffer.concat([n,i],n.length+i.length)};Y.createPingFrame=function(e,t){var r,i;return r=Buffer.from(e),i=re(!0,9,t===void 0?!1:t,r),Buffer.concat([i,r],i.length+r.length)};Y.createPongFrame=function(e,t){var r,i;return r=Buffer.from(e),i=re(!0,10,t===void 0?!1:t,r),Buffer.concat([i,r],i.length+r.length)};function re(e,t,r,i){var n,a,s,c,o;if(n=i.length,a=Buffer.alloc(2+(n<126?0:n<65536?2:8)+(r?4:0)),a[0]=(e?128:0)+t,a[1]=r?128:0,s=2,n<126?a[1]+=n:n<65536?(a[1]+=126,a.writeUInt16BE(n,2),s+=2):(a[1]+=127,a.writeUInt32BE(Math.floor(n/Math.pow(2,32)),2),a.writeUInt32BE(n%Math.pow(2,32),6),s+=8),r){for(c=Buffer.alloc(4),o=0;o<4;o++)a[s+o]=c[o]=Math.floor(Math.random()*256);for(o=0;o<i.length;o++)i[o]^=c[o%4];s+=4}return a}});var Tt=S((Qn,Nt)=>{"use strict";var fi=require("util"),Ot=require("stream"),Ct=Ae();function Ie(e,t){var r=this;this.connection=e,this.minSize=t,this.buffer=Buffer.alloc(0),this.hasSent=!1,Ot.Writable.call(this),this.on("finish",function(){r.connection.readyState===r.connection.OPEN&&r.connection.socket.write(Ct.createBinaryFrame(r.buffer,!r.connection.server,!r.hasSent,!0)),r.connection.outStream=null})}Nt.exports=Ie;fi.inherits(Ie,Ot.Writable);Ie.prototype._write=function(e,t,r){var i;this.buffer=Buffer.concat([this.buffer,e],this.buffer.length+e.length),this.buffer.length>=this.minSize?(this.connection.readyState===this.connection.OPEN&&(i=Ct.createBinaryFrame(this.buffer,!this.connection.server,!this.hasSent,!1),this.connection.socket.write(i,t,r)),this.buffer=Buffer.alloc(0),this.hasSent=!0,this.connection.readyState!==this.connection.OPEN&&r()):r()}});var Be=S((Zn,jt)=>{"use strict";var li=require("util"),At=require("events"),It=require("crypto"),Bt=_t(),qt=Tt(),z=Ae(),di=qe();function E(e,t,r){var i=this,n;t instanceof di?(this.server=t,this.path=null,this.host=null,this.extraHeaders=null,this.protocols=[]):(this.server=null,this.path=t.path,this.host=t.host,this.extraHeaders=t.extraHeaders,this.protocols=t.protocols||[]),this.protocol=void 0,this.socket=e,this.readyState=this.CONNECTING,this.buffer=Buffer.alloc(0),this.frameBuffer=null,this.outStream=null,this.key=null,this.headers={},e.on("readable",function(){i.doRead()}),e.on("error",function(s){i.emit("error",s)}),this.server||(n=e.constructor.name==="CleartextStream"?"secureConnect":"connect",e.on(n,function(){i.startHandshake()}));var a=function(){(i.readyState===i.CONNECTING||i.readyState===i.OPEN)&&i.emit("close",1006,""),i.readyState=this.CLOSED,i.frameBuffer instanceof Bt&&(i.frameBuffer.end(),i.frameBuffer=null),i.outStream instanceof qt&&(i.outStream.end(),i.outStream=null)};e.once("close",a),e.once("finish",a),At.EventEmitter.call(this),r&&this.once("connect",r)}li.inherits(E,At.EventEmitter);jt.exports=E;E.binaryFragmentation=512*1024;E.maxBufferLength=2*1024*1024;E.prototype.CONNECTING=0;E.prototype.OPEN=1;E.prototype.CLOSING=2;E.prototype.CLOSED=3;E.prototype.sendText=function(e,t){if(this.readyState===this.OPEN){if(!this.outStream)return this.socket.write(z.createTextFrame(e,!this.server),t);this.emit("error",new Error("You can't send a text frame until you finish sending binary frames"))}else this.emit("error",new Error("You can't write to a non-open connection"))};E.prototype.beginBinary=function(){if(this.readyState===this.OPEN){if(!this.outStream)return this.outStream=new qt(this,E.binaryFragmentation);this.emit("error",new Error("You can't send more binary frames until you finish sending the previous binary frames"))}else this.emit("error",new Error("You can't write to a non-open connection"))};E.prototype.sendBinary=function(e,t){if(this.readyState===this.OPEN){if(!this.outStream)return this.socket.write(z.createBinaryFrame(e,!this.server,!0,!0),t);this.emit("error",new Error("You can't send more binary frames until you finish sending the previous binary frames"))}else this.emit("error",new Error("You can't write to a non-open connection"))};E.prototype.send=function(e,t){if(typeof e=="string")this.sendText(e,t);else if(Buffer.isBuffer(e))this.sendBinary(e,t);else throw new TypeError("data should be either a string or a Buffer instance")};E.prototype.sendPing=function(e){this.readyState===this.OPEN?this.socket.write(z.createPingFrame(e||"",!this.server)):this.emit("error",new Error("You can't write to a non-open connection"))};E.prototype.close=function(e,t){this.readyState===this.OPEN?(this.socket.write(z.createCloseFrame(e,t,!this.server)),this.readyState=this.CLOSING):this.readyState!==this.CLOSED&&(this.socket.end(),this.readyState=this.CLOSED),this.emit("close",e,t)};E.prototype.doRead=function(){var e,t;if(e=this.socket.read(),!!e&&(this.buffer=Buffer.concat([this.buffer,e],this.buffer.length+e.length),!(this.readyState===this.CONNECTING&&!this.readHandshake())&&this.readyState!==this.CLOSED)){for(;(t=this.extractFrame())===!0;);t===!1?this.close(1002):this.buffer.length>E.maxBufferLength&&this.close(1009)}};E.prototype.startHandshake=function(){var e,t,r,i,n;for(r=Buffer.alloc(16),t=0;t<16;t++)r[t]=Math.floor(Math.random()*256);this.key=r.toString("base64"),i={Host:this.host,Upgrade:"websocket",Connection:"Upgrade","Sec-WebSocket-Key":this.key,"Sec-WebSocket-Version":"13"},this.protocols&&this.protocols.length&&(i["Sec-WebSocket-Protocol"]=this.protocols.join(", "));for(n in this.extraHeaders)i[n]=this.extraHeaders[n];e=this.buildRequest("GET "+this.path+" HTTP/1.1",i),this.socket.write(e)};E.prototype.readHandshake=function(){var e=!1,t,r;if(this.buffer.length>E.maxBufferLength)return this.server?this.socket.end(`HTTP/1.1 400 Bad Request\r
\r
`):(this.socket.end(),this.emit("error",new Error("Handshake is too big"))),!1;for(t=0;t<this.buffer.length-3;t++)if(this.buffer[t]===13&&this.buffer[t+2]===13&&this.buffer[t+1]===10&&this.buffer[t+3]===10){e=!0;break}return e?(r=this.buffer.slice(0,t+4).toString().split(`\r
`),(this.server?this.answerHandshake(r):this.checkHandshake(r))?(this.buffer=this.buffer.slice(t+4),this.readyState=this.OPEN,this.emit("connect"),!0):(this.socket.end(this.server?`HTTP/1.1 400 Bad Request\r
\r
`:void 0),!1)):!1};E.prototype.readHeaders=function(e){var t,r;for(t=1;t<e.length;t++)(r=e[t].match(/^([a-z-]+): (.+)$/i))&&(this.headers[r[1].toLowerCase()]=r[2])};E.prototype.checkHandshake=function(e){var t,r,i;if(e.length<4)return this.emit("error",new Error("Invalid handshake: too short")),!1;if(!e[0].match(/^HTTP\/\d\.\d 101( .*)?$/i))return this.emit("error",new Error("Invalid handshake: invalid first line format")),!1;if(this.readHeaders(e),!("upgrade"in this.headers)||!("sec-websocket-accept"in this.headers)||!("connection"in this.headers))return this.emit("error",new Error("Invalid handshake: missing required headers")),!1;if(this.headers.upgrade.toLowerCase()!=="websocket"||this.headers.connection.toLowerCase().split(/\s*,\s*/).indexOf("upgrade")===-1)return this.emit("error",new Error("Invalid handshake: invalid Upgrade or Connection header")),!1;if(t=this.headers["sec-websocket-accept"],i=this.headers["sec-websocket-protocol"],this.protocols&&this.protocols.length){if(!i||this.protocols.indexOf(i)===-1)return this.emit("error",new Error("Invalid handshake: no protocol was negotiated")),!1}else if(i)return this.emit("error",new Error("Invalid handshake: no protocol negotiation was expected")),!1;return this.protocol=i,r=It.createHash("sha1"),r.end(this.key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11"),t!==r.read().toString("base64")?(this.emit("error",new Error("Invalid handshake: hash mismatch")),!1):!0};E.prototype.answerHandshake=function(e){var t,r,i,n;return e.length<6||(t=e[0].match(/^GET (.+) HTTP\/\d\.\d$/i),!t)||(this.path=t[1],this.readHeaders(e),!("host"in this.headers)||!("sec-websocket-key"in this.headers)||!("upgrade"in this.headers)||!("connection"in this.headers))||this.headers.upgrade.toLowerCase()!=="websocket"||this.headers.connection.toLowerCase().split(/\s*,\s*/).indexOf("upgrade")===-1||this.headers["sec-websocket-version"]!=="13"?!1:(this.key=this.headers["sec-websocket-key"],"sec-websocket-protocol"in this.headers&&(this.protocols=this.headers["sec-websocket-protocol"].split(",").map(function(a){return a.trim()}),this.server._selectProtocol&&(this.protocol=this.server._selectProtocol(this,this.protocols))),i=It.createHash("sha1"),i.end(this.key+"258EAFA5-E914-47DA-95CA-C5AB0DC85B11"),r=i.read().toString("base64"),n={Upgrade:"websocket",Connection:"Upgrade","Sec-WebSocket-Accept":r},this.protocol&&(n["Sec-WebSocket-Protocol"]=this.protocol),this.socket.write(this.buildRequest("HTTP/1.1 101 Switching Protocols",n)),!0)};E.prototype.extractFrame=function(){var e,t,r,i,n,a,s,c,o,u;if(!(this.buffer.length<2)){if(r=this.buffer[0],i=r>>4,i%8||(e=i===8,t=r%16,t!==0&&t!==1&&t!==2&&t!==8&&t!==9&&t!==10)||t>=8&&!e||(r=this.buffer[1],u=r>>7,this.server&&!u||!this.server&&u))return!1;if(a=r%128,c=u?6:2,!(this.buffer.length<c+a)&&(a===126?(a=this.buffer.readUInt16BE(2),c+=2):a===127&&(a=this.buffer.readUInt32BE(2)*Math.pow(2,32)+this.buffer.readUInt32BE(6),c+=8),!(this.buffer.length<c+a))){if(s=this.buffer.slice(c,c+a),u)for(n=this.buffer.slice(c-4,c),o=0;o<s.length;o++)s[o]^=n[o%4];return this.buffer=this.buffer.slice(c+a),this.processFrame(e,t,s)}}};E.prototype.processFrame=function(e,t,r){return t===8?(this.readyState===this.CLOSING?this.socket.end():this.readyState===this.OPEN&&this.processCloseFrame(r),!0):t===9?(this.readyState===this.OPEN&&this.socket.write(z.createPongFrame(r.toString(),!this.server)),!0):t===10?(this.emit("pong",r.toString()),!0):this.readyState!==this.OPEN?!0:t===0&&this.frameBuffer===null||t!==0&&this.frameBuffer!==null?!1:(t||(t=typeof this.frameBuffer=="string"?1:2),t===1?(r=r.toString(),this.frameBuffer=this.frameBuffer?this.frameBuffer+r:r,e&&(this.emit("text",this.frameBuffer),this.frameBuffer=null)):(this.frameBuffer||(this.frameBuffer=new Bt,this.emit("binary",this.frameBuffer)),this.frameBuffer.addData(r),e&&(this.frameBuffer.end(),this.frameBuffer=null)),!0)};E.prototype.processCloseFrame=function(e){var t,r;e.length>=2?(t=e.readUInt16BE(0),r=e.slice(2).toString()):(t=1005,r=""),this.socket.write(z.createCloseFrame(t,r,!this.server)),this.readyState=this.CLOSED,this.emit("close",t,r)};E.prototype.buildRequest=function(e,t){var r=e+`\r
`,i;for(i in t)r+=i+": "+t[i]+`\r
`;return r+`\r
`}});var qe=S((Jn,Pt)=>{"use strict";function xt(){}var mi=require("util"),vi=require("net"),pi=require("tls"),Dt=require("events"),Rt;function ie(e,t,r){var i=this;typeof t=="function"&&(r=t,t=void 0);var n=function(a){var s=new Rt(a,i,function(){i.connections.push(s),s.removeListener("error",xt),i.emit("connection",s)});s.on("close",function(){var c=i.connections.indexOf(s);c!==-1&&i.connections.splice(c,1)}),s.on("error",xt)};e?this.socket=pi.createServer(t,n):this.socket=vi.createServer(t,n),this.socket.on("close",function(){i.emit("close")}),this.socket.on("error",function(a){i.emit("error",a)}),this.connections=[],Dt.EventEmitter.call(this),r&&this.on("connection",r),this._selectProtocol=null,t&&t.selectProtocol?this._selectProtocol=t.selectProtocol:t&&t.validProtocols&&(this._selectProtocol=this._buildSelectProtocol(t.validProtocols))}mi.inherits(ie,Dt.EventEmitter);Pt.exports=ie;Rt=Be();ie.prototype.listen=function(e,t,r){var i=this;return typeof t=="function"&&(r=t,t=void 0),r&&this.on("listening",r),this.socket.listen(e,t,function(){i.emit("listening")}),this};ie.prototype.close=function(e){e&&this.once("close",e),this.socket.close()};ie.prototype._buildSelectProtocol=function(e){return function(t,r){var i;for(i=0;i<r.length;i++)if(e.indexOf(r[i])!==-1)return r[i]}}});var Mt=S(ne=>{"use strict";var Lt=qe(),je=Be(),gi=require("net"),yi=require("tls"),Ei=require("url");ne.createServer=function(e,t){return typeof e=="function"||!arguments.length?new Lt(!1,e):new Lt(Boolean(e.secure),e,t)};ne.connect=function(e,t,r){var i;typeof t=="function"&&(r=t,t=void 0),t=t||{};var n=bi(e);return t.port=n.port,t.host=n.host,n.extraHeaders=t.extraHeaders,n.protocols=t.protocols,n.secure?i=yi.connect(t):i=gi.connect(t),new je(i,n,r)};ne.setBinaryFragmentation=function(e){je.binaryFragmentation=e};ne.setMaxBufferLength=function(e){je.maxBufferLength=e};function bi(e){var t,r;if(t=Ei.parse(e),t.protocol=t.protocol||"ws:",t.protocol==="ws:")r=!1;else if(t.protocol==="wss:")r=!0;else throw new Error("Invalid protocol "+t.protocol+". It must be ws or wss");return t.port=t.port||(r?443:80),t.path=t.path||"/",{path:t.path,port:t.port,secure:r,host:t.hostname}}});var Ft=S(xe=>{var G=require("path"),R=process.platform==="win32",P=require("fs"),wi=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Si(){var e;if(wi){var t=new Error;e=r}else e=i;return e;function r(n){n&&(t.message=n.message,n=t,i(n))}function i(n){if(n){if(process.throwDeprecation)throw n;if(!process.noDeprecation){var a="fs: missing callback "+(n.stack||n.message);process.traceDeprecation?console.trace(a):console.error(a)}}}}function ki(e){return typeof e=="function"?e:Si()}var Vn=G.normalize;R?x=/(.*?)(?:[\/\\]+|$)/g:x=/(.*?)(?:[\/]+|$)/g;var x;R?ae=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:ae=/^[\/]*/;var ae;xe.realpathSync=function(t,r){if(t=G.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];var i=t,n={},a={},s,c,o,u;f();function f(){var p=ae.exec(t);s=p[0].length,c=p[0],o=p[0],u="",R&&!a[o]&&(P.lstatSync(o),a[o]=!0)}for(;s<t.length;){x.lastIndex=s;var m=x.exec(t);if(u=c,c+=m[0],o=u+m[1],s=x.lastIndex,!(a[o]||r&&r[o]===o)){var h;if(r&&Object.prototype.hasOwnProperty.call(r,o))h=r[o];else{var l=P.lstatSync(o);if(!l.isSymbolicLink()){a[o]=!0,r&&(r[o]=o);continue}var d=null;if(!R){var v=l.dev.toString(32)+":"+l.ino.toString(32);n.hasOwnProperty(v)&&(d=n[v])}d===null&&(P.statSync(o),d=P.readlinkSync(o)),h=G.resolve(u,d),r&&(r[o]=h),R||(n[v]=d)}t=G.resolve(h,t.slice(s)),f()}}return r&&(r[i]=t),t};xe.realpath=function(t,r,i){if(typeof i!="function"&&(i=ki(r),r=null),t=G.resolve(t),r&&Object.prototype.hasOwnProperty.call(r,t))return process.nextTick(i.bind(null,null,r[t]));var n=t,a={},s={},c,o,u,f;m();function m(){var p=ae.exec(t);c=p[0].length,o=p[0],u=p[0],f="",R&&!s[u]?P.lstat(u,function(y){if(y)return i(y);s[u]=!0,h()}):process.nextTick(h)}function h(){if(c>=t.length)return r&&(r[n]=t),i(null,t);x.lastIndex=c;var p=x.exec(t);return f=o,o+=p[0],u=f+p[1],c=x.lastIndex,s[u]||r&&r[u]===u?process.nextTick(h):r&&Object.prototype.hasOwnProperty.call(r,u)?v(r[u]):P.lstat(u,l)}function l(p,y){if(p)return i(p);if(!y.isSymbolicLink())return s[u]=!0,r&&(r[u]=u),process.nextTick(h);if(!R){var w=y.dev.toString(32)+":"+y.ino.toString(32);if(a.hasOwnProperty(w))return d(null,a[w],u)}P.stat(u,function(N){if(N)return i(N);P.readlink(u,function(_,B){R||(a[w]=B),d(_,B)})})}function d(p,y,w){if(p)return i(p);var N=G.resolve(f,y);r&&(r[w]=N),v(N)}function v(p){t=G.resolve(p,t.slice(c)),m()}}});var Le=S((ta,Ut)=>{Ut.exports=L;L.realpath=L;L.sync=Pe;L.realpathSync=Pe;L.monkeypatch=Oi;L.unmonkeypatch=Ci;var X=require("fs"),De=X.realpath,Re=X.realpathSync,_i=process.version,Gt=/^v[0-5]\./.test(_i),Ht=Ft();function $t(e){return e&&e.syscall==="realpath"&&(e.code==="ELOOP"||e.code==="ENOMEM"||e.code==="ENAMETOOLONG")}function L(e,t,r){if(Gt)return De(e,t,r);typeof t=="function"&&(r=t,t=null),De(e,t,function(i,n){$t(i)?Ht.realpath(e,t,r):r(i,n)})}function Pe(e,t){if(Gt)return Re(e,t);try{return Re(e,t)}catch(r){if($t(r))return Ht.realpathSync(e,t);throw r}}function Oi(){X.realpath=L,X.realpathSync=Pe}function Ci(){X.realpath=De,X.realpathSync=Re}});var Yt=S((ra,Wt)=>{Wt.exports=function(e,t){for(var r=[],i=0;i<e.length;i++){var n=t(e[i],i);Ni(n)?r.push.apply(r,n):r.push(n)}return r};var Ni=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}});var Jt=S((ia,Zt)=>{"use strict";Zt.exports=zt;function zt(e,t,r){e instanceof RegExp&&(e=Xt(e,r)),t instanceof RegExp&&(t=Xt(t,r));var i=Qt(e,t,r);return i&&{start:i[0],end:i[1],pre:r.slice(0,i[0]),body:r.slice(i[0]+e.length,i[1]),post:r.slice(i[1]+t.length)}}function Xt(e,t){var r=t.match(e);return r?r[0]:null}zt.range=Qt;function Qt(e,t,r){var i,n,a,s,c,o=r.indexOf(e),u=r.indexOf(t,o+1),f=o;if(o>=0&&u>0){if(e===t)return[o,u];for(i=[],a=r.length;f>=0&&!c;)f==o?(i.push(f),o=r.indexOf(e,f+1)):i.length==1?c=[i.pop(),u]:(n=i.pop(),n<a&&(a=n,s=u),u=r.indexOf(t,f+1)),f=o<u&&o>=0?o:u;i.length&&(c=[a,s])}return c}});var ar=S((na,nr)=>{var Ti=Yt(),Kt=Jt();nr.exports=Bi;var Vt="\0SLASH"+Math.random()+"\0",er="\0OPEN"+Math.random()+"\0",Me="\0CLOSE"+Math.random()+"\0",tr="\0COMMA"+Math.random()+"\0",rr="\0PERIOD"+Math.random()+"\0";function Fe(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function Ai(e){return e.split("\\\\").join(Vt).split("\\{").join(er).split("\\}").join(Me).split("\\,").join(tr).split("\\.").join(rr)}function Ii(e){return e.split(Vt).join("\\").split(er).join("{").split(Me).join("}").split(tr).join(",").split(rr).join(".")}function ir(e){if(!e)return[""];var t=[],r=Kt("{","}",e);if(!r)return e.split(",");var i=r.pre,n=r.body,a=r.post,s=i.split(",");s[s.length-1]+="{"+n+"}";var c=ir(a);return a.length&&(s[s.length-1]+=c.shift(),s.push.apply(s,c)),t.push.apply(t,s),t}function Bi(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Q(Ai(e),!0).map(Ii)):[]}function qi(e){return"{"+e+"}"}function ji(e){return/^-?0\d/.test(e)}function xi(e,t){return e<=t}function Di(e,t){return e>=t}function Q(e,t){var r=[],i=Kt("{","}",e);if(!i||/\$$/.test(i.pre))return[e];var n=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),s=n||a,c=i.body.indexOf(",")>=0;if(!s&&!c)return i.post.match(/,.*\}/)?(e=i.pre+"{"+i.body+Me+i.post,Q(e)):[e];var o;if(s)o=i.body.split(/\.\./);else if(o=ir(i.body),o.length===1&&(o=Q(o[0],!1).map(qi),o.length===1)){var f=i.post.length?Q(i.post,!1):[""];return f.map(function(Oe){return i.pre+o[0]+Oe})}var u=i.pre,f=i.post.length?Q(i.post,!1):[""],m;if(s){var h=Fe(o[0]),l=Fe(o[1]),d=Math.max(o[0].length,o[1].length),v=o.length==3?Math.abs(Fe(o[2])):1,p=xi,y=l<h;y&&(v*=-1,p=Di);var w=o.some(ji);m=[];for(var N=h;p(N,l);N+=v){var _;if(a)_=String.fromCharCode(N),_==="\\"&&(_="");else if(_=String(N),w){var B=d-_.length;if(B>0){var fe=new Array(B+1).join("0");N<0?_="-"+fe+_.slice(1):_=fe+_}}m.push(_)}}else m=Ti(o,function(le){return Q(le,!1)});for(var W=0;W<m.length;W++)for(var F=0;F<f.length;F++){var j=u+m[W]+f[F];(!t||s||j)&&r.push(j)}return r}});var me=S((aa,fr)=>{fr.exports=I;I.Minimatch=O;var se={sep:"/"};try{se=require("path")}catch(e){}var Ge=I.GLOBSTAR=O.GLOBSTAR={},Ri=ar(),sr={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},He="[^/]",$e=He+"*?",Pi="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Li="(?:(?!(?:\\/|^)\\.).)*?",or=Mi("().*{}+?[]^$\\!");function Mi(e){return e.split("").reduce(function(t,r){return t[r]=!0,t},{})}var cr=/\/+/;I.filter=Fi;function Fi(e,t){return t=t||{},function(r,i,n){return I(r,e,t)}}function ur(e,t){e=e||{},t=t||{};var r={};return Object.keys(t).forEach(function(i){r[i]=t[i]}),Object.keys(e).forEach(function(i){r[i]=e[i]}),r}I.defaults=function(e){if(!e||!Object.keys(e).length)return I;var t=I,r=function(n,a,s){return t.minimatch(n,a,ur(e,s))};return r.Minimatch=function(n,a){return new t.Minimatch(n,ur(e,a))},r};O.defaults=function(e){return!e||!Object.keys(e).length?O:I.defaults(e).Minimatch};function I(e,t,r){if(typeof t!="string")throw new TypeError("glob pattern string required");return r||(r={}),!r.nocomment&&t.charAt(0)==="#"?!1:t.trim()===""?e==="":new O(t,r).match(e)}function O(e,t){if(!(this instanceof O))return new O(e,t);if(typeof e!="string")throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),se.sep!=="/"&&(e=e.split(se.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}O.prototype.debug=function(){};O.prototype.make=Gi;function Gi(){if(!this._made){var e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();var r=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error),this.debug(this.pattern,r),r=this.globParts=r.map(function(i){return i.split(cr)}),this.debug(this.pattern,r),r=r.map(function(i,n,a){return i.map(this.parse,this)},this),this.debug(this.pattern,r),r=r.filter(function(i){return i.indexOf(!1)===-1}),this.debug(this.pattern,r),this.set=r}}O.prototype.parseNegate=Hi;function Hi(){var e=this.pattern,t=!1,r=this.options,i=0;if(!r.nonegate){for(var n=0,a=e.length;n<a&&e.charAt(n)==="!";n++)t=!t,i++;i&&(this.pattern=e.substr(i)),this.negate=t}}I.braceExpand=function(e,t){return hr(e,t)};O.prototype.braceExpand=hr;function hr(e,t){if(t||(this instanceof O?t=this.options:t={}),e=typeof e=="undefined"?this.pattern:e,typeof e=="undefined")throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:Ri(e)}O.prototype.parse=$i;var de={};function $i(e,t){if(e.length>1024*64)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&e==="**")return Ge;if(e==="")return"";var i="",n=!!r.nocase,a=!1,s=[],c=[],o,u=!1,f=-1,m=-1,h=e.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",l=this;function d(){if(o){switch(o){case"*":i+=$e,n=!0;break;case"?":i+=He,n=!0;break;default:i+="\\"+o;break}l.debug("clearStateChar %j %j",o,i),o=!1}}for(var v=0,p=e.length,y;v<p&&(y=e.charAt(v));v++){if(this.debug("%s	%s %s %j",e,v,i,y),a&&or[y]){i+="\\"+y,a=!1;continue}switch(y){case"/":return!1;case"\\":d(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,v,i,y),u){this.debug("  in class"),y==="!"&&v===m+1&&(y="^"),i+=y;continue}l.debug("call clearStateChar %j",o),d(),o=y,r.noext&&d();continue;case"(":if(u){i+="(";continue}if(!o){i+="\\(";continue}s.push({type:o,start:v-1,reStart:i.length,open:sr[o].open,close:sr[o].close}),i+=o==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",o,i),o=!1;continue;case")":if(u||!s.length){i+="\\)";continue}d(),n=!0;var w=s.pop();i+=w.close,w.type==="!"&&c.push(w),w.reEnd=i.length;continue;case"|":if(u||!s.length||a){i+="\\|",a=!1;continue}d(),i+="|";continue;case"[":if(d(),u){i+="\\"+y;continue}u=!0,m=v,f=i.length,i+=y;continue;case"]":if(v===m+1||!u){i+="\\"+y,a=!1;continue}if(u){var N=e.substring(m+1,v);try{RegExp("["+N+"]")}catch(bt){var _=this.parse(N,de);i=i.substr(0,f)+"\\["+_[0]+"\\]",n=n||_[1],u=!1;continue}}n=!0,u=!1,i+=y;continue;default:d(),a?a=!1:or[y]&&!(y==="^"&&u)&&(i+="\\"),i+=y}}for(u&&(N=e.substr(m+1),_=this.parse(N,de),i=i.substr(0,f)+"\\["+_[0],n=n||_[1]),w=s.pop();w;w=s.pop()){var B=i.slice(w.reStart+w.open.length);this.debug("setting tail",i,w),B=B.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(bt,wt,Te){return Te||(Te="\\"),wt+wt+Te+"|"}),this.debug(`tail=%j
   %s`,B,B,w,i);var fe=w.type==="*"?$e:w.type==="?"?He:"\\"+w.type;n=!0,i=i.slice(0,w.reStart)+fe+"\\("+B}d(),a&&(i+="\\\\");var W=!1;switch(i.charAt(0)){case".":case"[":case"(":W=!0}for(var F=c.length-1;F>-1;F--){var j=c[F],le=i.slice(0,j.reStart),Oe=i.slice(j.reStart,j.reEnd-8),yt=i.slice(j.reEnd-8,j.reEnd),ee=i.slice(j.reEnd);yt+=ee;var oi=le.split("(").length-1,Ce=ee;for(v=0;v<oi;v++)Ce=Ce.replace(/\)[+*?]?/,"");ee=Ce;var Et="";ee===""&&t!==de&&(Et="$");var ci=le+Oe+ee+Et+yt;i=ci}if(i!==""&&n&&(i="(?=.)"+i),W&&(i=h+i),t===de)return[i,n];if(!n)return Yi(e);var ui=r.nocase?"i":"";try{var Ne=new RegExp("^"+i+"$",ui)}catch(bt){return new RegExp("$.")}return Ne._glob=e,Ne._src=i,Ne}I.makeRe=function(e,t){return new O(e,t||{}).makeRe()};O.prototype.makeRe=Ui;function Ui(){if(this.regexp||this.regexp===!1)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,r=t.noglobstar?$e:t.dot?Pi:Li,i=t.nocase?"i":"",n=e.map(function(a){return a.map(function(s){return s===Ge?r:typeof s=="string"?zi(s):s._src}).join("\\/")}).join("|");n="^(?:"+n+")$",this.negate&&(n="^(?!"+n+").*$");try{this.regexp=new RegExp(n,i)}catch(a){this.regexp=!1}return this.regexp}I.match=function(e,t,r){r=r||{};var i=new O(t,r);return e=e.filter(function(n){return i.match(n)}),i.options.nonull&&!e.length&&e.push(t),e};O.prototype.match=Wi;function Wi(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;var r=this.options;se.sep!=="/"&&(e=e.split(se.sep).join("/")),e=e.split(cr),this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var n,a;for(a=e.length-1;a>=0&&(n=e[a],!n);a--);for(a=0;a<i.length;a++){var s=i[a],c=e;r.matchBase&&s.length===1&&(c=[n]);var o=this.matchOne(c,s,t);if(o)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}O.prototype.matchOne=function(e,t,r){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var n=0,a=0,s=e.length,c=t.length;n<s&&a<c;n++,a++){this.debug("matchOne loop");var o=t[a],u=e[n];if(this.debug(t,o,u),o===!1)return!1;if(o===Ge){this.debug("GLOBSTAR",[t,o,u]);var f=n,m=a+1;if(m===c){for(this.debug("** at the end");n<s;n++)if(e[n]==="."||e[n]===".."||!i.dot&&e[n].charAt(0)===".")return!1;return!0}for(;f<s;){var h=e[f];if(this.debug(`
globstar while`,e,f,t,m,h),this.matchOne(e.slice(f),t.slice(m),r))return this.debug("globstar found match!",f,s,h),!0;if(h==="."||h===".."||!i.dot&&h.charAt(0)==="."){this.debug("dot detected!",e,f,t,m);break}this.debug("globstar swallow a segment, and continue"),f++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,f,t,m),f===s))}var l;if(typeof o=="string"?(i.nocase?l=u.toLowerCase()===o.toLowerCase():l=u===o,this.debug("string match",o,u,l)):(l=u.match(o),this.debug("pattern match",o,u,l)),!l)return!1}if(n===s&&a===c)return!0;if(n===s)return r;if(a===c){var d=n===s-1&&e[n]==="";return d}throw new Error("wtf?")};function Yi(e){return e.replace(/\\(.)/g,"$1")}function zi(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var lr=S((sa,Ue)=>{typeof Object.create=="function"?Ue.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Ue.exports=function(t,r){if(r){t.super_=r;var i=function(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}}});var dr=S((oa,Ye)=>{try{if(We=require("util"),typeof We.inherits!="function")throw"";Ye.exports=We.inherits}catch(e){Ye.exports=lr()}var We});var pe=S((ca,ve)=>{"use strict";function mr(e){return e.charAt(0)==="/"}function vr(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,r=t.exec(e),i=r[1]||"",n=Boolean(i&&i.charAt(1)!==":");return Boolean(r[2]||n)}ve.exports=process.platform==="win32"?vr:mr;ve.exports.posix=mr;ve.exports.win32=vr});var Xe=S(M=>{M.setopts=Ki;M.ownProp=pr;M.makeAbs=oe;M.finish=Vi;M.mark=en;M.isIgnored=yr;M.childrenIgnored=tn;function pr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Z=require("path"),Xi=me(),gr=pe(),ze=Xi.Minimatch;function Qi(e,t){return e.localeCompare(t,"en")}function Zi(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]),e.ignore.length&&(e.ignore=e.ignore.map(Ji))}function Ji(e){var t=null;if(e.slice(-3)==="/**"){var r=e.replace(/(\/\*\*)+$/,"");t=new ze(r,{dot:!0})}return{matcher:new ze(e,{dot:!0}),gmatcher:t}}function Ki(e,t,r){if(r||(r={}),r.matchBase&&t.indexOf("/")===-1){if(r.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!r.silent,e.pattern=t,e.strict=r.strict!==!1,e.realpath=!!r.realpath,e.realpathCache=r.realpathCache||Object.create(null),e.follow=!!r.follow,e.dot=!!r.dot,e.mark=!!r.mark,e.nodir=!!r.nodir,e.nodir&&(e.mark=!0),e.sync=!!r.sync,e.nounique=!!r.nounique,e.nonull=!!r.nonull,e.nosort=!!r.nosort,e.nocase=!!r.nocase,e.stat=!!r.stat,e.noprocess=!!r.noprocess,e.absolute=!!r.absolute,e.maxLength=r.maxLength||1/0,e.cache=r.cache||Object.create(null),e.statCache=r.statCache||Object.create(null),e.symlinks=r.symlinks||Object.create(null),Zi(e,r),e.changedCwd=!1;var i=process.cwd();pr(r,"cwd")?(e.cwd=Z.resolve(r.cwd),e.changedCwd=e.cwd!==i):e.cwd=i,e.root=r.root||Z.resolve(e.cwd,"/"),e.root=Z.resolve(e.root),process.platform==="win32"&&(e.root=e.root.replace(/\\/g,"/")),e.cwdAbs=gr(e.cwd)?e.cwd:oe(e,e.cwd),process.platform==="win32"&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/")),e.nomount=!!r.nomount,r.nonegate=!0,r.nocomment=!0,e.minimatch=new ze(t,r),e.options=e.minimatch.options}function Vi(e){for(var t=e.nounique,r=t?[]:Object.create(null),i=0,n=e.matches.length;i<n;i++){var a=e.matches[i];if(!a||Object.keys(a).length===0){if(e.nonull){var s=e.minimatch.globSet[i];t?r.push(s):r[s]=!0}}else{var c=Object.keys(a);t?r.push.apply(r,c):c.forEach(function(o){r[o]=!0})}}if(t||(r=Object.keys(r)),e.nosort||(r=r.sort(Qi)),e.mark){for(var i=0;i<r.length;i++)r[i]=e._mark(r[i]);e.nodir&&(r=r.filter(function(o){var u=!/\/$/.test(o),f=e.cache[o]||e.cache[oe(e,o)];return u&&f&&(u=f!=="DIR"&&!Array.isArray(f)),u}))}e.ignore.length&&(r=r.filter(function(o){return!yr(e,o)})),e.found=r}function en(e,t){var r=oe(e,t),i=e.cache[r],n=t;if(i){var a=i==="DIR"||Array.isArray(i),s=t.slice(-1)==="/";if(a&&!s?n+="/":!a&&s&&(n=n.slice(0,-1)),n!==t){var c=oe(e,n);e.statCache[c]=e.statCache[r],e.cache[c]=e.cache[r]}}return n}function oe(e,t){var r=t;return t.charAt(0)==="/"?r=Z.join(e.root,t):gr(t)||t===""?r=t:e.changedCwd?r=Z.resolve(e.cwd,t):r=Z.resolve(t),process.platform==="win32"&&(r=r.replace(/\\/g,"/")),r}function yr(e,t){return e.ignore.length?e.ignore.some(function(r){return r.matcher.match(t)||!!(r.gmatcher&&r.gmatcher.match(t))}):!1}function tn(e,t){return e.ignore.length?e.ignore.some(function(r){return!!(r.gmatcher&&r.gmatcher.match(t))}):!1}});var kr=S((da,Sr)=>{Sr.exports=wr;wr.GlobSync=k;var ge=require("fs"),rn=Le(),Er=me(),ha=Er.Minimatch,fa=Je().Glob,la=require("util"),Qe=require("path"),br=require("assert"),ye=pe(),H=Xe(),nn=H.setopts,Ze=H.ownProp,an=H.childrenIgnored,sn=H.isIgnored;function wr(e,t){if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new k(e,t).found}function k(e,t){if(!e)throw new Error("must provide pattern");if(typeof t=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof k))return new k(e,t);if(nn(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var i=0;i<r;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}k.prototype._finish=function(){if(br(this instanceof k),this.realpath){var e=this;this.matches.forEach(function(t,r){var i=e.matches[r]=Object.create(null);for(var n in t)try{n=e._makeAbs(n);var a=rn.realpathSync(n,e.realpathCache);i[a]=!0}catch(s){if(s.syscall==="stat")i[e._makeAbs(n)]=!0;else throw s}})}H.finish(this)};k.prototype._process=function(e,t,r){br(this instanceof k);for(var i=0;typeof e[i]=="string";)i++;var n;switch(i){case e.length:this._processSimple(e.join("/"),t);return;case 0:n=null;break;default:n=e.slice(0,i).join("/");break}var a=e.slice(i),s;n===null?s=".":((ye(n)||ye(e.join("/")))&&(!n||!ye(n))&&(n="/"+n),s=n);var c=this._makeAbs(s);if(!an(this,s)){var o=a[0]===Er.GLOBSTAR;o?this._processGlobStar(n,s,c,a,t,r):this._processReaddir(n,s,c,a,t,r)}};k.prototype._processReaddir=function(e,t,r,i,n,a){var s=this._readdir(r,a);if(!!s){for(var c=i[0],o=!!this.minimatch.negate,u=c._glob,f=this.dot||u.charAt(0)===".",m=[],h=0;h<s.length;h++){var l=s[h];if(l.charAt(0)!=="."||f){var d;o&&!e?d=!l.match(c):d=l.match(c),d&&m.push(l)}}var v=m.length;if(v!==0){if(i.length===1&&!this.mark&&!this.stat){this.matches[n]||(this.matches[n]=Object.create(null));for(var h=0;h<v;h++){var l=m[h];e&&(e.slice(-1)!=="/"?l=e+"/"+l:l=e+l),l.charAt(0)==="/"&&!this.nomount&&(l=Qe.join(this.root,l)),this._emitMatch(n,l)}return}i.shift();for(var h=0;h<v;h++){var l=m[h],p;e?p=[e,l]:p=[l],this._process(p.concat(i),n,a)}}}};k.prototype._emitMatch=function(e,t){if(!sn(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var i=this.cache[r];if(i==="DIR"||Array.isArray(i))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}};k.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r,i;try{r=ge.lstatSync(e)}catch(a){if(a.code==="ENOENT")return null}var n=r&&r.isSymbolicLink();return this.symlinks[e]=n,!n&&r&&!r.isDirectory()?this.cache[e]="FILE":t=this._readdir(e,!1),t};k.prototype._readdir=function(e,t){var r;if(t&&!Ze(this.symlinks,e))return this._readdirInGlobStar(e);if(Ze(this.cache,e)){var i=this.cache[e];if(!i||i==="FILE")return null;if(Array.isArray(i))return i}try{return this._readdirEntries(e,ge.readdirSync(e))}catch(n){return this._readdirError(e,n),null}};k.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var i=t[r];e==="/"?i=e+i:i=e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,t};k.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=t.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t);break}};k.prototype._processGlobStar=function(e,t,r,i,n,a){var s=this._readdir(r,a);if(!!s){var c=i.slice(1),o=e?[e]:[],u=o.concat(c);this._process(u,n,!1);var f=s.length,m=this.symlinks[r];if(!(m&&a))for(var h=0;h<f;h++){var l=s[h];if(!(l.charAt(0)==="."&&!this.dot)){var d=o.concat(s[h],c);this._process(d,n,!0);var v=o.concat(s[h],i);this._process(v,n,!0)}}}};k.prototype._processSimple=function(e,t){var r=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),!!r){if(e&&ye(e)&&!this.nomount){var i=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=Qe.join(this.root,e):(e=Qe.resolve(this.root,e),i&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}};k.prototype._stat=function(e){var t=this._makeAbs(e),r=e.slice(-1)==="/";if(e.length>this.maxLength)return!1;if(!this.stat&&Ze(this.cache,t)){var s=this.cache[t];if(Array.isArray(s)&&(s="DIR"),!r||s==="DIR")return s;if(r&&s==="FILE")return!1}var i,n=this.statCache[t];if(!n){var a;try{a=ge.lstatSync(t)}catch(c){if(c&&(c.code==="ENOENT"||c.code==="ENOTDIR"))return this.statCache[t]=!1,!1}if(a&&a.isSymbolicLink())try{n=ge.statSync(t)}catch(c){n=a}else n=a}this.statCache[t]=n;var s=!0;return n&&(s=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,r&&s==="FILE"?!1:s};k.prototype._mark=function(e){return H.mark(this,e)};k.prototype._makeAbs=function(e){return H.makeAbs(this,e)}});var Ke=S((ma,Or)=>{Or.exports=_r;function _r(e,t){if(e&&t)return _r(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(i){r[i]=e[i]}),r;function r(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];var a=e.apply(this,i),s=i[i.length-1];return typeof a=="function"&&a!==s&&Object.keys(s).forEach(function(c){a[c]=s[c]}),a}}});var et=S((va,Ve)=>{var Cr=Ke();Ve.exports=Cr(Ee);Ve.exports.strict=Cr(Nr);Ee.proto=Ee(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ee(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Nr(this)},configurable:!0})});function Ee(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Nr(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var Ar=S((pa,Tr)=>{var on=Ke(),ce=Object.create(null),cn=et();Tr.exports=on(un);function un(e,t){return ce[e]?(ce[e].push(t),null):(ce[e]=[t],hn(e))}function hn(e){return cn(function t(){var r=ce[e],i=r.length,n=fn(arguments);try{for(var a=0;a<i;a++)r[a].apply(null,n)}finally{r.length>i?(r.splice(0,i),process.nextTick(function(){t.apply(null,n)})):delete ce[e]}})}function fn(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i]=e[i];return r}});var Je=S((Ea,Br)=>{Br.exports=U;var be=require("fs"),ln=Le(),Ir=me(),ga=Ir.Minimatch,dn=dr(),mn=require("events").EventEmitter,tt=require("path"),rt=require("assert"),ue=pe(),it=kr(),$=Xe(),vn=$.setopts,nt=$.ownProp,at=Ar(),ya=require("util"),pn=$.childrenIgnored,gn=$.isIgnored,yn=et();function U(e,t,r){if(typeof t=="function"&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return it(e,t)}return new g(e,t,r)}U.sync=it;var En=U.GlobSync=it.GlobSync;U.glob=U;function bn(e,t){if(t===null||typeof t!="object")return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e}U.hasMagic=function(e,t){var r=bn({},t);r.noprocess=!0;var i=new g(e,r),n=i.minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var a=0;a<n[0].length;a++)if(typeof n[0][a]!="string")return!0;return!1};U.Glob=g;dn(g,mn);function g(e,t,r){if(typeof t=="function"&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new En(e,t)}if(!(this instanceof g))return new g(e,t,r);vn(this,e,t),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),typeof r=="function"&&(r=yn(r),this.on("error",r),this.on("end",function(o){r(null,o)}));var n=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(i===0)return c();for(var a=!0,s=0;s<i;s++)this._process(this.minimatch.set[s],s,!1,c);a=!1;function c(){--n._processing,n._processing<=0&&(a?process.nextTick(function(){n._finish()}):n._finish())}}g.prototype._finish=function(){if(rt(this instanceof g),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();$.finish(this),this.emit("end",this.found)}};g.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var e=this.matches.length;if(e===0)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,i);function i(){--e==0&&t._finish()}};g.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var i=Object.keys(r),n=this,a=i.length;if(a===0)return t();var s=this.matches[e]=Object.create(null);i.forEach(function(c,o){c=n._makeAbs(c),ln.realpath(c,n.realpathCache,function(u,f){u?u.syscall==="stat"?s[c]=!0:n.emit("error",u):s[f]=!0,--a==0&&(n.matches[e]=s,t())})})};g.prototype._mark=function(e){return $.mark(this,e)};g.prototype._makeAbs=function(e){return $.makeAbs(this,e)};g.prototype.abort=function(){this.aborted=!0,this.emit("abort")};g.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};g.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);this._processQueue.length=0;for(var t=0;t<i.length;t++){var n=i[t];this._processing--,this._process(n[0],n[1],n[2],n[3])}}}};g.prototype._process=function(e,t,r,i){if(rt(this instanceof g),rt(typeof i=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([e,t,r,i]);return}for(var n=0;typeof e[n]=="string";)n++;var a;switch(n){case e.length:this._processSimple(e.join("/"),t,i);return;case 0:a=null;break;default:a=e.slice(0,n).join("/");break}var s=e.slice(n),c;a===null?c=".":((ue(a)||ue(e.join("/")))&&(!a||!ue(a))&&(a="/"+a),c=a);var o=this._makeAbs(c);if(pn(this,c))return i();var u=s[0]===Ir.GLOBSTAR;u?this._processGlobStar(a,c,o,s,t,r,i):this._processReaddir(a,c,o,s,t,r,i)}};g.prototype._processReaddir=function(e,t,r,i,n,a,s){var c=this;this._readdir(r,a,function(o,u){return c._processReaddir2(e,t,r,i,n,a,u,s)})};g.prototype._processReaddir2=function(e,t,r,i,n,a,s,c){if(!s)return c();for(var o=i[0],u=!!this.minimatch.negate,f=o._glob,m=this.dot||f.charAt(0)===".",h=[],l=0;l<s.length;l++){var d=s[l];if(d.charAt(0)!=="."||m){var v;u&&!e?v=!d.match(o):v=d.match(o),v&&h.push(d)}}var p=h.length;if(p===0)return c();if(i.length===1&&!this.mark&&!this.stat){this.matches[n]||(this.matches[n]=Object.create(null));for(var l=0;l<p;l++){var d=h[l];e&&(e!=="/"?d=e+"/"+d:d=e+d),d.charAt(0)==="/"&&!this.nomount&&(d=tt.join(this.root,d)),this._emitMatch(n,d)}return c()}i.shift();for(var l=0;l<p;l++){var d=h[l],y;e&&(e!=="/"?d=e+"/"+d:d=e+d),this._process([d].concat(i),n,a,c)}c()};g.prototype._emitMatch=function(e,t){if(!this.aborted&&!gn(this,t)){if(this.paused){this._emitQueue.push([e,t]);return}var r=ue(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var i=this.cache[r];if(i==="DIR"||Array.isArray(i))return}this.matches[e][t]=!0;var n=this.statCache[r];n&&this.emit("stat",t,n),this.emit("match",t)}}};g.prototype._readdirInGlobStar=function(e,t){if(this.aborted)return;if(this.follow)return this._readdir(e,!1,t);var r="lstat\0"+e,i=this,n=at(r,a);n&&be.lstat(e,n);function a(s,c){if(s&&s.code==="ENOENT")return t();var o=c&&c.isSymbolicLink();i.symlinks[e]=o,!o&&c&&!c.isDirectory()?(i.cache[e]="FILE",t()):i._readdir(e,!1,t)}};g.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=at("readdir\0"+e+"\0"+t,r),!!r)){if(t&&!nt(this.symlinks,e))return this._readdirInGlobStar(e,r);if(nt(this.cache,e)){var i=this.cache[e];if(!i||i==="FILE")return r();if(Array.isArray(i))return r(null,i)}var n=this;be.readdir(e,wn(this,e,r))}};function wn(e,t,r){return function(i,n){i?e._readdirError(t,i,r):e._readdirEntries(t,n,r)}}g.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<t.length;i++){var n=t[i];e==="/"?n=e+n:n=e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,r(null,t)}};g.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(e);if(this.cache[i]="FILE",i===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);n.path=this.cwd,n.code=t.code,this.emit("error",n),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t);break}return r()}};g.prototype._processGlobStar=function(e,t,r,i,n,a,s){var c=this;this._readdir(r,a,function(o,u){c._processGlobStar2(e,t,r,i,n,a,u,s)})};g.prototype._processGlobStar2=function(e,t,r,i,n,a,s,c){if(!s)return c();var o=i.slice(1),u=e?[e]:[],f=u.concat(o);this._process(f,n,!1,c);var m=this.symlinks[r],h=s.length;if(m&&a)return c();for(var l=0;l<h;l++){var d=s[l];if(!(d.charAt(0)==="."&&!this.dot)){var v=u.concat(s[l],o);this._process(v,n,!0,c);var p=u.concat(s[l],i);this._process(p,n,!0,c)}}c()};g.prototype._processSimple=function(e,t,r){var i=this;this._stat(e,function(n,a){i._processSimple2(e,t,n,a,r)})};g.prototype._processSimple2=function(e,t,r,i,n){if(this.matches[t]||(this.matches[t]=Object.create(null)),!i)return n();if(e&&ue(e)&&!this.nomount){var a=/[\/\\]$/.test(e);e.charAt(0)==="/"?e=tt.join(this.root,e):(e=tt.resolve(this.root,e),a&&(e+="/"))}process.platform==="win32"&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),n()};g.prototype._stat=function(e,t){var r=this._makeAbs(e),i=e.slice(-1)==="/";if(e.length>this.maxLength)return t();if(!this.stat&&nt(this.cache,r)){var n=this.cache[r];if(Array.isArray(n)&&(n="DIR"),!i||n==="DIR")return t(null,n);if(i&&n==="FILE")return t()}var a,s=this.statCache[r];if(s!==void 0){if(s===!1)return t(null,s);var c=s.isDirectory()?"DIR":"FILE";return i&&c==="FILE"?t():t(null,c,s)}var o=this,u=at("stat\0"+r,f);u&&be.lstat(r,u);function f(m,h){if(h&&h.isSymbolicLink())return be.stat(r,function(l,d){l?o._stat2(e,r,null,h,t):o._stat2(e,r,l,d,t)});o._stat2(e,r,m,h,t)}};g.prototype._stat2=function(e,t,r,i,n){if(r&&(r.code==="ENOENT"||r.code==="ENOTDIR"))return this.statCache[t]=!1,n();var a=e.slice(-1)==="/";if(this.statCache[t]=i,t.slice(-1)==="/"&&i&&!i.isDirectory())return n(null,!1,i);var s=!0;return i&&(s=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||s,a&&s==="FILE"?n():n(null,s,i)}});var Mr=S((ba,Lr)=>{var b=require("assert"),qr=require("path"),jr=require("fs"),J;try{J=Je()}catch(e){}var Sn={nosort:!0,silent:!0},st=0,he=process.platform==="win32",xr=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||jr[r],r=r+"Sync",e[r]=e[r]||jr[r]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,e.glob===!1&&(e.disableGlob=!0),e.disableGlob!==!0&&J===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||Sn},ot=(e,t,r)=>{typeof t=="function"&&(r=t,t={}),b(e,"rimraf: missing path"),b.equal(typeof e,"string","rimraf: path should be a string"),b.equal(typeof r,"function","rimraf: callback function required"),b(t,"rimraf: invalid options argument provided"),b.equal(typeof t,"object","rimraf: options should be object"),xr(t);let i=0,n=null,a=0,s=o=>{n=n||o,--a==0&&r(n)},c=(o,u)=>{if(o)return r(o);if(a=u.length,a===0)return r();u.forEach(f=>{let m=h=>{if(h){if((h.code==="EBUSY"||h.code==="ENOTEMPTY"||h.code==="EPERM")&&i<t.maxBusyTries)return i++,setTimeout(()=>ct(f,t,m),i*100);if(h.code==="EMFILE"&&st<t.emfileWait)return setTimeout(()=>ct(f,t,m),st++);h.code==="ENOENT"&&(h=null)}st=0,s(h)};ct(f,t,m)})};if(t.disableGlob||!J.hasMagic(e))return c(null,[e]);t.lstat(e,(o,u)=>{if(!o)return c(null,[e]);J(e,t.glob,c)})},ct=(e,t,r)=>{b(e),b(t),b(typeof r=="function"),t.lstat(e,(i,n)=>{if(i&&i.code==="ENOENT")return r(null);if(i&&i.code==="EPERM"&&he&&Dr(e,t,i,r),n&&n.isDirectory())return we(e,t,i,r);t.unlink(e,a=>{if(a){if(a.code==="ENOENT")return r(null);if(a.code==="EPERM")return he?Dr(e,t,a,r):we(e,t,a,r);if(a.code==="EISDIR")return we(e,t,a,r)}return r(a)})})},Dr=(e,t,r,i)=>{b(e),b(t),b(typeof i=="function"),t.chmod(e,438,n=>{n?i(n.code==="ENOENT"?null:r):t.stat(e,(a,s)=>{a?i(a.code==="ENOENT"?null:r):s.isDirectory()?we(e,t,r,i):t.unlink(e,i)})})},Rr=(e,t,r)=>{b(e),b(t);try{t.chmodSync(e,438)}catch(n){if(n.code==="ENOENT")return;throw r}let i;try{i=t.statSync(e)}catch(n){if(n.code==="ENOENT")return;throw r}i.isDirectory()?Se(e,t,r):t.unlinkSync(e)},we=(e,t,r,i)=>{b(e),b(t),b(typeof i=="function"),t.rmdir(e,n=>{n&&(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")?kn(e,t,i):n&&n.code==="ENOTDIR"?i(r):i(n)})},kn=(e,t,r)=>{b(e),b(t),b(typeof r=="function"),t.readdir(e,(i,n)=>{if(i)return r(i);let a=n.length;if(a===0)return t.rmdir(e,r);let s;n.forEach(c=>{ot(qr.join(e,c),t,o=>{if(!s){if(o)return r(s=o);--a==0&&t.rmdir(e,r)}})})})},Pr=(e,t)=>{t=t||{},xr(t),b(e,"rimraf: missing path"),b.equal(typeof e,"string","rimraf: path should be a string"),b(t,"rimraf: missing options"),b.equal(typeof t,"object","rimraf: options should be object");let r;if(t.disableGlob||!J.hasMagic(e))r=[e];else try{t.lstatSync(e),r=[e]}catch(i){r=J.sync(e,t.glob)}if(!!r.length)for(let i=0;i<r.length;i++){let n=r[i],a;try{a=t.lstatSync(n)}catch(s){if(s.code==="ENOENT")return;s.code==="EPERM"&&he&&Rr(n,t,s)}try{a&&a.isDirectory()?Se(n,t,null):t.unlinkSync(n)}catch(s){if(s.code==="ENOENT")return;if(s.code==="EPERM")return he?Rr(n,t,s):Se(n,t,s);if(s.code!=="EISDIR")throw s;Se(n,t,s)}}},Se=(e,t,r)=>{b(e),b(t);try{t.rmdirSync(e)}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR")throw r;(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")&&_n(e,t)}},_n=(e,t)=>{b(e),b(t),t.readdirSync(e).forEach(n=>Pr(qr.join(e,n),t));let r=he?100:1,i=0;do{let n=!0;try{let a=t.rmdirSync(e,t);return n=!1,a}finally{if(++i<r&&n)continue}}while(!0)};Lr.exports=ot;ot.sync=Pr});var ii=S((wa,D)=>{var C=require("fs"),ut=require("os"),A=require("path"),Fr=require("crypto"),q={fs:C.constants,os:ut.constants},Gr=Mr(),Hr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",$r=/XXXXXX/,On=3,Ur=(q.O_CREAT||q.fs.O_CREAT)|(q.O_EXCL||q.fs.O_EXCL)|(q.O_RDWR||q.fs.O_RDWR),Cn=ut.platform()==="win32",Nn=q.EBADF||q.os.errno.EBADF,Tn=q.ENOENT||q.os.errno.ENOENT,Wr=448,Yr=384,An="exit",K=[],zr=C.rmdirSync.bind(C),Xr=Gr.sync,Qr=!1;function ht(e,t){let r=V(e,t),i=r[0],n=r[1];try{ei(i)}catch(s){return n(s)}let a=i.tries;(function s(){try{let c=Vr(i);C.stat(c,function(o){if(!o)return a-- >0?s():n(new Error("Could not get a unique tmp filename, max tries reached "+c));n(null,c)})}catch(c){n(c)}})()}function ft(e){let t=V(e),r=t[0];ei(r);let i=r.tries;do{let n=Vr(r);try{C.statSync(n)}catch(a){return n}}while(i-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function In(e,t){let r=V(e,t),i=r[0],n=r[1];ht(i,function(s,c){if(s)return n(s);C.open(c,Ur,i.mode||Yr,function(u,f){if(u)return n(u);if(i.discardDescriptor)return C.close(f,function(h){return n(h,c,void 0,lt(c,-1,i,!1))});{let m=i.discardDescriptor||i.detachDescriptor;n(null,c,f,lt(c,m?-1:f,i,!1))}})})}function Bn(e){let t=V(e),r=t[0],i=r.discardDescriptor||r.detachDescriptor,n=ft(r);var a=C.openSync(n,Ur,r.mode||Yr);return r.discardDescriptor&&(C.closeSync(a),a=void 0),{name:n,fd:a,removeCallback:lt(n,i?-1:a,r,!0)}}function qn(e,t){let r=V(e,t),i=r[0],n=r[1];ht(i,function(s,c){if(s)return n(s);C.mkdir(c,i.mode||Wr,function(u){if(u)return n(u);n(null,c,Zr(c,i,!1))})})}function jn(e){let t=V(e),r=t[0],i=ft(r);return C.mkdirSync(i,r.mode||Wr),{name:i,removeCallback:Zr(i,r,!0)}}function xn(e,t){let r=function(i){if(i&&!pt(i))return t(i);t()};0<=e[0]?C.close(e[0],function(){C.unlink(e[1],r)}):C.unlink(e[1],r)}function Dn(e){let t=null;try{0<=e[0]&&C.closeSync(e[0])}catch(r){if(!Pn(r)&&!pt(r))throw r}finally{try{C.unlinkSync(e[1])}catch(r){pt(r)||(t=r)}}if(t!==null)throw t}function lt(e,t,r,i){let n=ke(Dn,[t,e],i),a=ke(xn,[t,e],i,n);return r.keep||K.unshift(n),i?n:a}function Zr(e,t,r){let i=t.unsafeCleanup?Gr:C.rmdir.bind(C),n=t.unsafeCleanup?Xr:zr,a=ke(n,e,r),s=ke(i,e,r,a);return t.keep||K.unshift(a),r?a:s}function ke(e,t,r,i){let n=!1;return function a(s){if(!n){let c=i||a,o=K.indexOf(c);return o>=0&&K.splice(o,1),n=!0,r||e===zr||e===Xr?e(t):e(t,s||function(){})}}}function Rn(){if(!!Qr)for(;K.length;)try{K[0]()}catch(e){}}function Jr(e){let t=[],r=null;try{r=Fr.randomBytes(e)}catch(n){r=Fr.pseudoRandomBytes(e)}for(var i=0;i<e;i++)t.push(Hr[r[i]%Hr.length]);return t.join("")}function Kr(e){return e===null||T(e)||!e.trim()}function T(e){return typeof e=="undefined"}function V(e,t){if(typeof e=="function")return[{},e];if(T(e))return[{},t];let r={};for(let i of Object.getOwnPropertyNames(e))r[i]=e[i];return[r,t]}function Vr(e){let t=e.tmpdir;if(!T(e.name))return A.join(t,e.dir,e.name);if(!T(e.template))return A.join(t,e.dir,e.template).replace($r,Jr(6));let r=[e.prefix?e.prefix:"tmp","-",process.pid,"-",Jr(12),e.postfix?"-"+e.postfix:""].join("");return A.join(t,e.dir,r)}function ei(e){e.tmpdir=ri(e);let t=e.tmpdir;if(T(e.name)||vt(e.name,"name",t),T(e.dir)||vt(e.dir,"dir",t),!T(e.template)&&(vt(e.template,"template",t),!e.template.match($r)))throw new Error(`Invalid template, found "${e.template}".`);if(!T(e.tries)&&isNaN(e.tries)||e.tries<0)throw new Error(`Invalid tries, found "${e.tries}".`);e.tries=T(e.name)?e.tries||On:1,e.keep=!!e.keep,e.detachDescriptor=!!e.detachDescriptor,e.discardDescriptor=!!e.discardDescriptor,e.unsafeCleanup=!!e.unsafeCleanup,e.dir=T(e.dir)?"":A.relative(t,dt(e.dir,t)),e.template=T(e.template)?void 0:A.relative(t,dt(e.template,t)),e.template=Kr(e.template)?void 0:A.relative(e.dir,e.template),e.name=T(e.name)?void 0:mt(e.name),e.prefix=T(e.prefix)?"":e.prefix,e.postfix=T(e.postfix)?"":e.postfix}function dt(e,t){let r=mt(e);return r.startsWith(t)?A.resolve(r):A.resolve(A.join(t,r))}function mt(e){return Kr(e)?e:e.replace(/["']/g,"")}function vt(e,t,r){if(t==="name"){if(A.isAbsolute(e))throw new Error(`${t} option must not contain an absolute path, found "${e}".`);let i=A.basename(e);if(i===".."||i==="."||i!==e)throw new Error(`${t} option must not contain a path, found "${e}".`)}else{if(A.isAbsolute(e)&&!e.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${e}".`);let i=dt(e,r);if(!i.startsWith(r))throw new Error(`${t} option must be relative to "${r}", found "${i}".`)}}function Pn(e){return ti(e,-Nn,"EBADF")}function pt(e){return ti(e,-Tn,"ENOENT")}function ti(e,t,r){return Cn?e.code===r:e.code===r&&e.errno===t}function Ln(){Qr=!0}function ri(e){return A.resolve(mt(e&&e.tmpdir||ut.tmpdir()))}process.addListener(An,Rn);Object.defineProperty(D.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return ri()}});D.exports.dir=qn;D.exports.dirSync=jn;D.exports.file=In;D.exports.fileSync=Bn;D.exports.tmpName=ht;D.exports.tmpNameSync=ft;D.exports.setGracefulCleanup=Ln});var _e=require("vscode"),{Range:Mn,Position:ni}=_e,{workspace:gt,window:ai}=_e,Fn=require("http"),Gn=Mt(),Hn=ii(),si=class{constructor(t){this.webSocketConnection=t;let r=this;this.onTextCallBack=i=>r.onMessage(i),this.editor=null,this.document=null,this.webSocketConnection.on("text",this.onTextCallBack),this.webSocketConnection.on("close",this.doCleanup),this.remoteChangedText=null,this.editorTitle=null,this.cleanupCallback=null,this.disposables=[],this.closed=!1}doCleanup(){this.cleanupCallback&&this.cleanupCallback(),this.disposables.forEach(t=>t.dispose())}updateEditorText(t){this.editor.edit(r=>{var i=this.editor.document.lineCount,n=this.editor.document.lineAt(i-1),a=n.range.end,s=new Mn(new ni(0,0),a);r.delete(s),r.insert(new ni(0,0),t)})}onMessage(t){let r=JSON.parse(t);if(this.editor===null){this.editorTitle=r.title;var i=_e.workspace.getConfiguration().get("tmpFileSuffix");Hn.file({postfix:i},(n,a,s,c)=>{this.cleanupCallback=c,gt.openTextDocument(a).then(o=>{this.document=o,ai.showTextDocument(o).then(u=>{this.editor=u,this.updateEditorText(r.text),this.disposables.push(gt.onDidCloseTextDocument(f=>{f==this.document&&f.isClosed&&(this.closed=!0,this.webSocketConnection.close(),this.doCleanup())})),this.disposables.push(gt.onDidChangeTextDocument(f=>{if(f.document==this.document){let h=this.document.getText();if(h!==this.remoteChangedText){var m={title:this.editorTitle,text:h,syntax:"TODO",selections:[]};return m=JSON.stringify(m),setTimeout(()=>this.closed||this.webSocketConnection.sendText(m),50)}}}))})})})}else return this.updateEditorText(r.text),this.remoteChangedText=r.text}},$n=null,Un=()=>{var e=_e.workspace.getConfiguration().get("tmpFileSuffix");return ai.showInformationMessage("Ghost text has been enabled! Default suffix: "+e+". You can change this in settings."),exports.httpStatusServer=Fn.createServer(function(t,r){let i=Gn.createServer(n=>new si(n));return i.on("listening",function(){let n={ProtocolVersion:1,WebSocketPort:i.socket.address().port};return n=JSON.stringify(n),r.writeHead(200,{"Content-Type":"application/json"}),r.end(n)}),i.listen(0)}),exports.httpStatusServer.listen(4001)},Wn=()=>exports.httpStatusServer.close();exports.httpStatusServer=$n;exports.activate=Un;exports.deactivate=Wn;
/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */
